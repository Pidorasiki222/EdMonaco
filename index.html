<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">

<head>
    <script>
        (function (root, name, factory) {
        });
    </script>

    <style type="text/css">
        <!-- @import url('https://fonts.googleapis.com/css2?family=JetBrains Mono:wght@600&display=swap'); -->
        @font-face {
            font-family: Poppins;
            src: url(font/Poppins-Regular.ttf);
        }
        * {
            font-family: 'Poppins', sans-serif !important;
            font-weight: 400 !important;
        }

        /* Transparent Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
            background-color: transparent;
        }

        ::-webkit-scrollbar-track {
            background-color: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }

        ::-webkit-scrollbar-corner {
            background-color: transparent;
        }

        html,
        body {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
            background: transparent !important;
        }

        /* CONTEXT MENU (VISUAL ADDITION ONLY) */
        .context-menu {
            position: fixed;
            background: #000000;
            border: 1px solid #111;
            border-radius: 12px;
            padding: 4px;
            min-width: 150px;
            z-index: 9999;
            box-shadow: 0 8px 30px rgba(0,0,0,0.9);
            font-size: 13px;
            display: flex;
            flex-direction: column;
            gap: 2px;
        }

        .context-menu-item {
            padding: 8px 12px;
            color: #cccccc;
            cursor: pointer;
            border-radius: 6px;
            transition: background 0.1s, color 0.1s;
        }

            .context-menu-item:hover {
                background: #1a1a1a;
                color: white;
            }
    </style>
    <meta charset="utf-8" />
    <title>Monco67</title>
</head>

<body>
    <div class="editor-container">
        <div id="tabs-container" class="tabs-container"></div>
        <div id="container" style="width:100%;height:calc(100% - 40px);"></div>
    </div>

    <script src="vs/loader.js"></script>

    <script>
        // REMOVE DEFAULT BROWSER RIGHT CLICK
        document.addEventListener("contextmenu", e => e.preventDefault());

        // CONTEXT MENU HELPER (ADDITION ONLY)
        let __ctxMenu = null;
        function showContextMenu(x, y, items) {
        if (__ctxMenu) __ctxMenu.remove();
        const menu = document.createElement("div");
        menu.className = "context-menu";

        items.forEach(i => {
        const el = document.createElement("div");
        el.className = "context-menu-item";
        el.textContent = i.label;
        el.onclick = () => {
        i.action();
        menu.remove();
        };
        menu.appendChild(el);
        });

        menu.style.left = x + "px";
        menu.style.top = y + "px";
        document.body.appendChild(menu);
        __ctxMenu = menu;

        document.addEventListener("click", () => menu.remove(), { once: true });
        }
    </script>


    <style type="text/css">
        * {
            font-family: 'Poppins', sans-serif !important;
            font-weight: 400 !important;
        }

        html,
        body {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
            background: #000000 !important;
            font-family: 'Poppins', sans-serif !important;
            font-weight: 400 !important;
        }
    </style>
    <meta charset="utf-8" />
    <title></title>
    </head>

    <body>
        <div class="editor-container">
            <div id="tabs-container" class="tabs-container"></div>
            <div id="container" style="width:100%;height:calc(100% - 40px);"></div>
        </div>

    <div id="rename-popup-overlay" class="popup-overlay" style="display: none;">
        <div class="popup-content">
            <div class="popup-title">Rename Tab</div>
            <div class="popup-label">Enter new name:</div>
            <input type="text" id="rename-input" placeholder="" spellcheck="false">
            <div class="popup-buttons">
                <button id="rename-save-btn" class="popup-btn save">Save</button>
                <button id="rename-cancel-btn" class="popup-btn cancel">Cancel</button>
            </div>
        </div>
    </div>

        <style>
            .editor-container {
                width: 100%;
                height: 100%;
                display: flex;
                flex-direction: column;
                background: #000000 !important;
                font-family: 'Poppins', sans-serif !important;
                font-weight: 400 !important;
            }

            .tabs-container {
                background: #000000 !important;
                display: flex;
                height: 40px;
                overflow-x: auto;
                border-bottom: none;
                gap: 4px;
                padding-left: 5px;
                padding-top: 5px;
                font-family: 'Poppins', sans-serif !important;
                font-weight: 400 !important;
            }

            .tab {
                display: flex;
                align-items: center;
                padding: 0 10px;
                background-color: #0a0a0a;
                color: #666666;
                min-width: 90px;
                max-width: 160px;
                position: relative;
                cursor: pointer;
                transition: background-color 0.2s, color 0.2s, border-color 0.2s;
                user-select: none;
                border: 1px solid #111111;
                border-radius: 8px;
                height: 30px;
                font-family: 'Poppins', sans-serif !important;
                font-weight: 400 !important;
            }

            .tab.active {
                background-color: #000000;
                color: #e0e0e0;
                border: 1px solid #222222;
            }

            .tab-title {
                flex-grow: 1;
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                font-size: 13px;
                padding-left: 2px;
                font-family: 'Poppins', sans-serif !important;
                font-weight: 400 !important;
            }

            .tab-title.editing {
                background-color: #1a1a1a;
                border: 1px solid #333333;
                padding: 2px 4px;
                border-radius: 3px;
                outline: none;
            }

            .tab-close {
                margin-left: 6px;
                opacity: 0.6;
                transition: opacity 0.2s, background-color 0.2s;
                display: flex;
                align-items: center;
                justify-content: center;
                width: 16px;
                height: 16px;
                border-radius: 50%;
                font-size: 12px;
                font-family: 'Poppins', sans-serif !important;
                font-weight: 400 !important;
            }

            .tab-close:hover {
                opacity: 1;
                background-color: #1a1a1a;
            }

            .tab.new-tab {
                min-width: 30px;
                max-width: 30px;
                justify-content: center;
                background-color: #0a0a0a;
                border: 1px solid #111111;
                border-radius: 8px;
                padding: 0;
                margin-left: 4px;
                font-size: 18px;
            }

            .tab.new-tab:hover {
                background-color: #1a1a1a;
                color: #e0e0e0;
            }

            @keyframes tabAppear {
                from {
                    opacity: 0;
                    transform: translateY(-8px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }

            @keyframes tabRemove {
                to {
                    opacity: 0;
                    transform: translateX(-8px);
                }
            }

            .tab.new {
                animation: tabAppear 0.2s ease-out;
            }

            .tab.removing {
                animation: tabRemove 0.2s ease-out;
            }

            /* POPUP STYLES */
            .popup-overlay {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.5);
                z-index: 10000;
                display: flex;
                justify-content: center;
                align-items: center;
                backdrop-filter: blur(2px);
            }

            .popup-content {
                background: #000000;
                border: 1px solid #111;
                border-radius: 14px;
                padding: 20px;
                width: 300px;
                box-shadow: 0 20px 50px rgba(0,0,0,0.9);
                display: flex;
                flex-direction: column;
                gap: 10px;
                animation: popupIn 0.2s ease-out;
            }

            @keyframes popupIn {
                from { opacity: 0; transform: scale(0.95); }
                to { opacity: 1; transform: scale(1); }
            }

            .popup-title {
                color: #e0e0e0;
                font-size: 18px;
                font-weight: 600;
                text-align: center;
                margin-bottom: 2px;
            }

            .popup-label {
                color: #888;
                font-size: 13px;
                text-align: left;
                margin-left: 2px;
            }

            #rename-input {
                background: #0a0a0a;
                border: 1px solid #222;
                border-radius: 8px;
                padding: 10px;
                color: #e0e0e0;
                font-family: 'Poppins', sans-serif;
                font-size: 13px;
                outline: none;
                transition: border-color 0.2s;
            }

            #rename-input:focus {
                border-color: #333;
            }

            .popup-buttons {
                display: flex;
                justify-content: center;
                gap: 10px;
                margin-top: 5px;
            }

            .popup-btn {
                padding: 8px 20px;
                border-radius: 8px;
                border: 1px solid #222;
                font-family: 'Poppins', sans-serif;
                font-weight: 400;
                font-size: 13px;
                cursor: pointer;
                transition: all 0.2s;
                background: #0a0a0a;
                color: #ccc;
                min-width: 80px;
            }

            .popup-btn:hover {
                background: #1a1a1a;
                color: #fff;
                border-color: #333;
            }

            .popup-btn.save {
                background: #0a0a0a;
            }

            .popup-btn.cancel {
                background: #0a0a0a;
            }

        </style>
        <script src="vs/loader.js"></script>
        <script type="text/javascript">
            require.config({
            paths: {
            'vs': 'vs'
            }
            });

            let editor;
            let Proposals = [];
            let currentTab = null;
            let tabs = [];

            class Tab {
            constructor(title, content = '') {
            this.id = 'tab-' + Math.random().toString(36).substr(2, 9);
            this.title = title;
            this.content = content;
            this.element = null;
            }
            }

            function saveTabs() {
            const tabsData = tabs.map(tab => ({
            id: tab.id,
            title: tab.title,
            content: tab.content
            }));
            localStorage.setItem('editorTabs', JSON.stringify(tabsData));
            }
            function loadTabs() {
            const savedTabs = localStorage.getItem('editorTabs');
            if (savedTabs) {
            const tabsData = JSON.parse(savedTabs);
            tabsData.forEach(tabData => {
            addTab(tabData.title, tabData.content, tabData.id);
            });
            } else {
            addTab('New Tab 1', '--[[ Yub-X Executor ]]--\n\nprint("Welcome To Yub-X")');

            }
            }

            let renameTabTarget = null;

            function showRenamePopup(tab) {
                renameTabTarget = tab;
                const overlay = document.getElementById('rename-popup-overlay');
                const input = document.getElementById('rename-input');
                
                input.value = tab.title;
                overlay.style.display = 'flex';
                input.focus();
                input.select();
            }

            function closeRenamePopup() {
                const overlay = document.getElementById('rename-popup-overlay');
                overlay.style.display = 'none';
                renameTabTarget = null;
            }

            function saveRename() {
                if (renameTabTarget) {
                    const input = document.getElementById('rename-input');
                    const newTitle = input.value.trim();
                    if (newTitle) {
                        renameTabTarget.title = newTitle;
                        if (renameTabTarget.element) {
                            const titleEl = renameTabTarget.element.querySelector('.tab-title');
                            if (titleEl) titleEl.textContent = newTitle;
                        }
                        saveTabs();
                    }
                    closeRenamePopup();
                }
            }

            // Init popup listeners
            window.addEventListener('load', () => {
                const cancelBtn = document.getElementById('rename-cancel-btn');
                const saveBtn = document.getElementById('rename-save-btn');
                const input = document.getElementById('rename-input');
                const overlay = document.getElementById('rename-popup-overlay');

                if (cancelBtn) cancelBtn.onclick = closeRenamePopup;
                if (saveBtn) saveBtn.onclick = saveRename;
                if (input) {
                    input.onkeydown = (e) => {
                        if (e.key === 'Enter') saveRename();
                        if (e.key === 'Escape') closeRenamePopup();
                    };
                }
                if (overlay) {
                    overlay.onclick = (e) => {
                        if (e.target.id === 'rename-popup-overlay') closeRenamePopup();
                    };
                }
            });

            function createTabElement(tab) {
            const tabElement = document.createElement('div');
            tabElement.className = 'tab new';
            tabElement.setAttribute('data-tab-id', tab.id);

            const titleElement = document.createElement('div');
            titleElement.className = 'tab-title';
            titleElement.textContent = tab.title;

            titleElement.ondblclick = (e) => {
            e.stopPropagation();
            showRenamePopup(tab);
            };

            const closeButton = document.createElement('div');
            closeButton.className = 'tab-close';
            closeButton.innerHTML = 'âœ•';
            closeButton.onclick = (e) => {
            e.stopPropagation();
            if (tabs.length > 1) {
            removeTab(tab.id);
            }
            };

            tabElement.appendChild(titleElement);
            tabElement.appendChild(closeButton);

            tabElement.onclick = () => switchTab(tab.id);

            return tabElement;
            }

            function createNewTabButton() {
            const newTabButton = document.createElement('div');
            newTabButton.className = 'tab new-tab';
            newTabButton.innerHTML = '+';
            newTabButton.onclick = () => {
            const newTab = addTab('New Tab ' + (tabs.length + 1));
            };
            return newTabButton;
            }

            function addTab(title, content = '', id = null) {
            const tab = new Tab(title, content);
            if (id) tab.id = id;
            tabs.push(tab);

            const tabsContainer = document.getElementById('tabs-container');
            const newTabButton = tabsContainer.querySelector('.new-tab');

            tab.element = createTabElement(tab);
            if (newTabButton) {
            tabsContainer.insertBefore(tab.element, newTabButton);
            } else {
            tabsContainer.appendChild(tab.element);
            tabsContainer.appendChild(createNewTabButton());
            }

            switchTab(tab.id);
            saveTabs();
            return tab;
            }

            function removeTab(tabId) {
            const tabIndex = tabs.findIndex(t => t.id === tabId);
            if (tabIndex === -1) return;

            if (tabs.length <= 1) return;

            const tab = tabs[tabIndex];
            tab.element.classList.add('removing');

            setTimeout(() => {
            tabs.splice(tabIndex, 1);
            tab.element.remove();

            if (currentTab === tabId) {
            switchTab(tabs[Math.min(tabIndex, tabs.length - 1)].id);
            }
            saveTabs();
            }, 200);
            }
            function switchTab(tabId) {
            const tab = tabs.find(t => t.id === tabId);
            if (!tab) return;

            tabs.forEach(t => {
            if (t.element) {
            t.element.classList.remove('active');
            }
            });

            // Always set the clicked tab as active
            if (tab.element) {
                tab.element.classList.add('active');
            }

            if (currentTab !== tabId) {
            if (currentTab) {
            const oldTab = tabs.find(t => t.id === currentTab);
            if (oldTab) {
            oldTab.content = editor.getValue();
            saveTabs();
            }
            }

            editor.setValue(tab.content);
            currentTab = tabId;
            }
            }

            function setupAutosave() {
            let saveTimeout;
            editor.onDidChangeModelContent(() => {
            clearTimeout(saveTimeout);
            saveTimeout = setTimeout(() => {
            if (currentTab) {
            const tab = tabs.find(t => t.id === currentTab);
            if (tab) {
            tab.content = editor.getValue();
            saveTabs();
            }
            }
            }, 1);
            });
            }
function loadFileIntoTab(fileName, content) {
        // Check if a tab with this name already exists
        const existingTab = tabs.find(tab => tab.title === fileName);
        
        if (existingTab) {
            // Switch to existing tab and update content
            switchTab(existingTab.id);
            setTimeout(() => {
                editor.setValue(content);
                existingTab.content = content;
                saveTabs();
            }, 10);
        } else {
            // Create new tab with file name and content
            const newTab = addTab(fileName, content);
            setTimeout(() => {
                editor.setValue(content);
            }, 10);
            }
            }

            // Make function available globally
            window.loadFileIntoTab = loadFileIntoTab;

            var enableAntiSkid;
            var disableAntiSkid;
            var SetText;
            var ShowMinimap;
            var HideMinimap;
            var EnableAutoComplete;
            var DisableAutoComplete;
            var GetText;
            var AddIntellisense;
            var Refresh;

            // Global theme setter to handle race conditions
            window.pendingTheme = null;
            window.setMonacoTheme = function(themeData) {
                if (typeof monaco !== 'undefined' && monaco.editor) {
                    monaco.editor.defineTheme('custom-theme', themeData);
                    monaco.editor.setTheme('custom-theme');
                } else {
                    window.pendingTheme = themeData;
                }
            };

            window.setTabTheme = function(bgColor) {
                let style = document.getElementById('dynamic-tab-style');
                if (!style) {
                    style = document.createElement('style');
                    style.id = 'dynamic-tab-style';
                    document.head.appendChild(style);
                }
                style.innerHTML = `
                    .tab.active {
                        background-color: ${bgColor} !important;
                        border-color: ${bgColor} !important;
                    }
                `;
            };

            require(['vs/editor/editor.main'], function () {
            
            // Apply pending theme if exists
            if (window.pendingTheme) {
                monaco.editor.defineTheme('custom-theme', window.pendingTheme);
                monaco.editor.setTheme('custom-theme');
                window.pendingTheme = null;
            }

            function getDependencyProposals() {
            return Proposals;
            }

            monaco.languages.registerCompletionItemProvider('lua', {
            provideCompletionItems: function (model, position) {
            return getDependencyProposals();
            },
            triggerCharacters: ['.', ':', '"'],
            });


           monaco.editor.defineTheme('net-theme-dark', {
    base: 'vs-dark',
    inherit: true,
    colors: {
        "editor.background": "#000000",
        "editorLineNumber.foreground": "#444444",
        "editorCursor.foreground": "#ffffff",
        "editor.selectionBackground": "#1a1a1a",
        "editor.inactiveSelectionBackground": "#00ff33",
        "scrollbarSlider.background": "#ffffff08",
        "scrollbarSlider.hoverBackground": "#ffffff15",
        "scrollbarSlider.activeBackground": "#ffffff25",
        "editorError.foreground": "#ff0000",
        "editorWarning.foreground": "#ffaa00"
    },
    rules: [
        { token: '', foreground: 'b0b0b0' },
        { token: 'keyword', foreground: '00ff33' },
        { token: 'number', foreground: '00f333' },
        { token: 'string', foreground: 'ffffff' },
        { token: 'string.escape', foreground: 'ffffff' },
        { token: 'comment', foreground: '4a4a4a' },
        { token: 'operator', foreground: '9704de' },
        { token: 'delimiter', foreground: '00ff33' },
        { token: 'delimiter.bracket', foreground: '6b8e7a' },
        { token: 'type', foreground: '8a8a8a' },
        { token: 'function', foreground: '00ff66' },
        { token: 'function.builtin', foreground: '00ff66' },
        { token: 'function.call', foreground: '00ff66' },
        { token: 'identifier', foreground: '00ff33' }
    ]
});


            editor = monaco.editor.create(document.getElementById('container'), {
            language: 'lua',
            theme: "net-theme-dark",
            acceptSuggestionOnEnter: "smart",
            cursorSmoothCaretAnimation: true,
            suggestOnTriggerCharacters: true,
            suggestSelection: "recentlyUsed",
            folding: true,
            dragAndDrop: true,
            links: false,
            minimap: {
            enabled: false,
            },
            scrollbar: {
                vertical: 'visible',
                horizontal: 'visible',
                useShadows: false,
                verticalHasArrows: false,
                horizontalHasArrows: false,
                verticalScrollbarSize: 8,
                horizontalScrollbarSize: 8
            },
            showFoldingControls: "always",
            smoothScrolling: true,
            stopRenderingLineAfter: 6500,
            cursorBlinking: "smooth",
            cursorSmoothCaretAnimation: true,
            foldingHighlight: false,
            fontLigatures: true,
            formatOnPaste: true,
            showDeprecated: true,
            suggest: {
            snippetsPreventQuickSuggestions: false,
            },
            padding: {
            top: 24,
            },
            fontFamily: "'Poppins', sans-serif",
            fontWeight: "400"
            });

            loadTabs();
            setupAutosave();

            EnableAutoComplete = function(){
            editor.updateOptions({
            suggestOnTriggerCharacters: true,
            acceptSuggestionOnEnter : "smart",
            wordBasedSuggestions : true
            });
            }

            DisableAutoComplete = function(){
            editor.updateOptions({
            suggestOnTriggerCharacters: false,
            acceptSuggestionOnEnter : "off",
            wordBasedSuggestions : false
            });
            }

            window.onresize = function () {
            editor.layout();
            };

            ShowMinimap = function () {
            editor.updateOptions({
            minimap: {
            enabled: true,
            }
            });
            }

            HideMinimap = function () {
            editor.updateOptions({
            minimap: {
            enabled: false,
            }
            });
            }

            function handleover()
            {
            document.body.style.filter = "blur(0px)"
            }
            function handleleave()
            {
            document.body.style.filter = "blur(5px)"
            }
            enableAntiSkid= function()
            {
            document.body.style.filter = "blur(5px)";
            document.body.addEventListener("mouseover",handleover);
            document.body.addEventListener("mouseleave",handleleave);
            }
            disableAntiSkid = function()
            {
            document.body.style.filter = "blur(0px)";
            document.body.removeEventListener("mouseover",handleover,false);
            document.body.removeEventListener("mouseleave",handleleave,false);

            }
          // DISABLED error checking (no red markers)
editor.onDidChangeModelContent(function () {
    monaco.editor.setModelMarkers(editor.getModel(), 'luaparse', []);
});


            SetText = function (x) {
            editor.setValue(x);
            }

            AddIntellisense = function (l, k, d, i) {
            var t;
            switch (k) {
            case "Class":
            t = monaco.languages.CompletionItemKind.Class;
            break;
            case "Color":
            t = monaco.languages.CompletionItemKind.Color;
            break;
            case "Constructor":
            t = monaco.languages.CompletionItemKind.Constructor;
            break;
            case "Enum":
            t = monaco.languages.CompletionItemKind.Enum;
            break;
            case "Field":
            t = monaco.languages.CompletionItemKind.Field;
            break;
            case "File":
            t = monaco.languages.CompletionItemKind.File;
            break;
            case "Folder":
            t = monaco.languages.CompletionItemKind.Folder;
            break;
            case "Function":
            t = monaco.languages.CompletionItemKind.Function;
            break;
            case "Interface":
            t = monaco.languages.CompletionItemKind.Interface;
            break;
            case "Keyword":
            t = monaco.languages.CompletionItemKind.Keyword;
            break;
            case "Method":
            t = monaco.languages.CompletionItemKind.Method;
            break;
            case "Module":
            t = monaco.languages.CompletionItemKind.Module;
            break;
            case "Property":
            t = monaco.languages.CompletionItemKind.Property;
            break;
            case "Reference":
            t = monaco.languages.CompletionItemKind.Reference;
            break;
            case "Snippet":
            t = monaco.languages.CompletionItemKind.Snippet;
            break;
            case "Text":
            t = monaco.languages.CompletionItemKind.Text;
            break;
            case "Unit":
            t = monaco.languages.CompletionItemKind.Unit;
            break;
            case "Value":
            t = monaco.languages.CompletionItemKind.Value;
            break;
            case "Variable":
            t = monaco.languages.CompletionItemKind.Variable;
            break;
            }

            Proposals.push({
            label: l,
            kind: t,
            detail: d,
            insertText: i
            });
            }
            async function load() {
            var docs = await(await fetch('https://raw.githubusercontent.com/Insalad/monacoshit/refs/heads/main/blah')).json();

            for (var prop in docs) {
            for(var item in docs[prop])
            {
            const document = docs[prop][item];
            AddIntellisense(document.label, document.type, document.description, document.insert);
            }
            }

            for (const Key of ["_G", "_VERSION", "Enum", "game", "plugin", "shared", "script", "workspace", "DebuggerManager", "elapsedTime", "LoadLibrary", "PluginManager", "settings", "tick", "time", "typeof", "UserSettings"])
            AddIntellisense(Key, "Keyword", Key, Key);

            for (const Key of ["and", "break", "do", "else", "elseif", "end", "false", "for", "function", "if", "in", "local", "nil", "not", "or", "repeat", "return", "then", "true", "until", "while"])
            AddIntellisense(Key, "Variable", Key, Key);

            for (const Key of ["math.abs", "math.acos", "math.asin", "math.atan", "math.atan2", "math.ceil", "math.cos", "math.cosh", "math.deg", "math.exp", "math.floor", "math.fmod", "math.frexp", "math.huge", "math.ldexp", "math.log", "math.max", "math.min", "math.modf", "math.pi", "math.pow", "math.rad", "math.random", "math.randomseed", "math.sin", "math.sinh", "math.sqrt", "math.tan", "math.tanh", "table.concat", "table.foreach", "table.foreachi", "table.sort", "table.insert", "table.remove", "Color3.new", "Instance.new", "BrickColor.new", "Vector3.new", "Vector2.new", "debug.gethook", "debug.getinfo", "debug.getlocal", "debug.getmetatable", "debug.getregistry", "debug.getupvalue", "debug.getuservalue", "debug.sethook", "debug.setlocal", "debug.setmetatable", "debug.setupvalue", "debug.setuservalue", "debug.traceback", "debug.upvalueid", "debug.upvaluejoin", "string.byte", "string.char", "string.dump", "string.find", "string.format", "string.gmatch", "string.gsub", "string.len", "string.lower", "string.match", "string.rep", "string.reverse", "string.sub", "string.upper", "coroutine.create", "coroutine.resume", "coroutine.running", "coroutine.status", "coroutine.wrap", "coroutine.yield"])
            AddIntellisense(Key, "Method", Key, Key);

            for (const Key of ["Drawing", "debug", "Instance", "Color3", "Vector3", "Vector2", "BrickColor", "math", "table", "string", "coroutine", "Humanoid", "ClickDetector", "LocalScript", "Model", "ModuleScript", "Mouse", "Part", "Player", "Script", "Tool", "RunService", "UserInputService", "Workspace"])
            AddIntellisense(Key, "Class", Key, Key);

            for (const Key of ["print", "warn", "wait", "info", "printidentity", "assert", "collectgarbage", "error", "getfenv", "getmetatable", "setmetatable", "ipairs", "loadfile", "loadstring", "newproxy", "next", "pairs", "pcall", "spawn", "rawequal", "rawget", "rawset", "select", "tonumber", "tostring", "type", "unpack", "xpcall", "delay", "stats", ":Remove()", ":BreakJoints()", ":GetChildren()", ":FindFirstChild()", ":FireServer()", ":InvokeServer()", ":ClearAllChildren()", ":Clone()", ":Destroy()", ":FindFirstAncestor()", ":FindFirstAncestorOfClass()", ":FindFirstAncestorWhichIsA()", ":FindFirstChildOfClass()", ":FindFirstChildWhichIsA()", ":GetDebugId()", ":GetDescendants()", ":GetFullName()", ":IsA()", ":GetPropertyChangedSignal()", ":IsAncestorOf()", ":IsDescendantOf()", ":WaitForChild()", ":Connect()", ":AncestryChanged()", ":Changed()", ":ChildAdded()", ":ChildRemoved()", ":DescendantAdded()", ":DescendantRemoving()", ":GetService()", ":GetObjects()", ":HttpGet()", ":Wait()"])
            AddIntellisense(Key, "Function", Key, Key.includes(":") ? Key.substring(1, Key.length) : Key);

            for (const Key of ["Visible", "Color", "Transparency", "Thickness", "From", "To", "Text", "Size", "Center", "Outline", "OutlineColor", "Position", "TextBounds", "Font", "Data", "Rounding", "NumSides", "Radius", "Filled", "PointA", "PointB", "PointC", "PointD"])
            AddIntellisense(Key, "Property", "Property for Drawing Library", Key);

            }
            load();
            Refresh = function () {
            var text = GetText();
            SetText("");
            editor.trigger('keyboard', 'type', {
            text: text
            });
            }
            });
        </script>
    </body>

</html>
    </script>
<!-- ================= END ORIGINAL SCRIPT ================= -->

<script>
    // VISUAL-ONLY HOOKS (NO FUNCTION MODIFICATION)
    window.addEventListener("load", () => {
    if (window.editor) {
    editor.getDomNode().addEventListener("contextmenu", e => {
    e.preventDefault();
    showContextMenu(e.clientX, e.clientY, [
    {
    label: "Clear All Text",
    action: () => {
    editor.setValue("");
    if (window.currentTab) {
    const t = tabs.find(x => x.id === currentTab);
    if (t) {
    t.content = "";
    saveTabs();
    }
    }
    }
    }
    ]);
    });
    }

    document.getElementById("tabs-container").addEventListener("contextmenu", e => {
    const tabEl = e.target.closest(".tab");
    if (!tabEl) return;

    e.preventDefault();
    const tabId = tabEl.getAttribute("data-tab-id");
    const tab = tabs.find(t => t.id === tabId);
    if (!tab) return;

    showContextMenu(e.clientX, e.clientY, [
    {
    label: "Rename Tab",
    action: () => {
    showRenamePopup(tab);
    }
    },
    {
    label: "Delete Tab",
    action: () => {
    if (tabs.length > 1) removeTab(tab.id);
    }
    }
    ]);
    });
    });
</script>
</body>
</html>
